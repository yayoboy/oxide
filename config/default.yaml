services:
  gemini:
    type: cli
    enabled: true
    executable: gemini
    max_context_tokens: 2000000
    capabilities:
    - codebase_analysis
    - architecture_design
    - multi_file_context
  qwen:
    type: cli
    enabled: true
    executable: qwen
    max_context_tokens: 32000
    capabilities:
    - code_review
    - code_generation
    - debugging
    - refactoring
  ollama_local:
    type: http
    enabled: true
    base_url: http://localhost:11434
    api_type: ollama
    default_model: qwen2.5-coder:7b
    models:
    - qwen2.5-coder:7b
    - qwen2.5-coder:14b
    - qwen3-coder:latest
    capabilities:
    - quick_query
    - code_generation
    - documentation
  ollama_remote:
    type: http
    enabled: true
    base_url: http://192.168.1.46:11434
    api_type: ollama
    capabilities:
    - parallel_processing
    - code_generation
  lmstudio:
    type: http
    enabled: true
    base_url: http://192.168.1.33:1234
    api_type: openai_compatible
  openrouter:
    type: http
    enabled: true
    base_url: https://openrouter.ai/api/v1
    api_type: openai_compatible
    # API key: set via OPENROUTER_API_KEY environment variable or uncomment below
    # api_key: your_openrouter_api_key_here
    default_model: openrouter/auto  # Intelligent model routing
    use_free_only: false  # Set to true to only use free models
    fallback_models:
      - google/gemini-flash-1.5
      - meta-llama/llama-3.2-3b-instruct:free
      - mistralai/mistral-7b-instruct:free
    site_url: https://github.com/oxide-ai/oxide
    site_name: Oxide LLM Orchestrator
    max_retries: 2
    retry_delay: 2
    capabilities:
      - code_generation
      - code_review
      - quick_query
      - documentation
      - general_purpose
routing_rules:
  codebase_analysis:
    primary: gemini
    fallback:
    - qwen
    - ollama_local
    parallel_threshold_files: 20
    timeout_seconds: 180
  code_review:
    primary: qwen
    fallback:
    - ollama_local
    - ollama_remote
    timeout_seconds: 60
  code_generation:
    primary: qwen
    fallback:
    - ollama_local
    timeout_seconds: 45
  quick_query:
    primary: ollama_local
    fallback:
    - ollama_remote
    - lmstudio
    - openrouter
    timeout_seconds: 10
  general_purpose:
    primary: openrouter
    fallback:
    - qwen
    - ollama_local
    timeout_seconds: 60
  architecture_design:
    primary: gemini
    fallback:
    - qwen
    timeout_seconds: 120
  debugging:
    primary: qwen
    fallback:
    - ollama_local
    - gemini
    timeout_seconds: 60
  documentation:
    primary: ollama_local
    fallback:
    - qwen
    - gemini
    timeout_seconds: 30
  refactoring:
    primary: qwen
    fallback:
    - ollama_local
    - ollama_remote
    timeout_seconds: 60
execution:
  max_parallel_workers: 4
  timeout_seconds: 120
  streaming: true
  retry_on_failure: true
  max_retries: 5
logging:
  level: INFO
  file: /tmp/oxide.log
  console: true
security:
  # File system sandboxing - allowed directories for file access
  # Paths can use ~ for home directory
  allowed_directories:
    - ~/Documents
    - ~/Projects
    - ~/Downloads
    - /tmp
    - /workspace  # Docker mount point
  # Enable/disable path validation (disable only for testing!)
  path_validation_enabled: true
storage:
  # Storage backend: 'sqlite' (recommended) or 'json' (legacy)
  # SQLite provides 10-100x better performance and concurrent access
  backend: sqlite  # Use 'json' to revert to legacy storage
